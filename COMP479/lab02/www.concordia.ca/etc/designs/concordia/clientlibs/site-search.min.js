"use strict";
$=jQuery;
$(document).ready(function(){var d=($("input#is_subsite").val()==="true");
$(".concordia-search-icon.hidden-phone").on("click",function(){$(this).toggleClass("open");
$("#input-search").focus()
});
$("#site-search").submit(function(){var k=$("input[name=search-mode]:checked").val();
var l=$("input#input-search").val();
if(k=="concordia-search"){return true
}else{if(k=="directory-search"){if($("#site_search_first_name").val()!=""&&$("#site_search_last_name").val()!=""){window.location.href=$("input#directory_url").val()+"?f=search&fname="+$("#site_search_first_name").val()+"&lname="+$("#site_search_last_name").val()
}else{window.location.href=$("input#directory_url").val()+"?f=search&name="+l
}}else{if(k=="encore-search"){window.location.href=$("input#encore_url").val()+l
}else{if(k=="libraries-search"){return true
}}}}return false
});
$("input[name=search-mode]").change(function(){var l="Search "+$(this).parent().text().trim();
var k=$(this).val();
if(k=="concordia-search"){$("#site-search").attr("action",$("input#concordia_url").val())
}else{if(k=="directory-search"){$("#site-search").attr("action",$("input#directory_url").val())
}else{if(k=="encore-search"){$("#site-search").attr("action",$("input#encore_url").val());
l=$(this).parent().text().trim()
}else{if(k=="libraries-search"){l+=" website";
$("#site-search").attr("action",$("input#libraries_url").val())
}}}}$("#input-search").attr("placeholder",l);
$("#input-search").autocomplete("option","source",h+"?type="+g())
}).click(function(){$("#input-search").focus()
});
var h="/etc/designs/concordia/resources/search-terms.json";
function g(){if($("input[name=search-mode]:checked").val()=="concordia-search"){return"terms"
}else{if($("input[name=search-mode]:checked").val()=="directory-search"){return"directory"
}}}if(document.getElementById("input-search")!=null){$("#input-search").autocomplete({minLength:3,source:h+"?type="+g(),focus:function(k,l){$("#input-search").val(l.item.label);
return false
},select:function(k,l){$("#input-search").val(l.item.label);
return false
},response:function(k,l){if(l.content.length==1){$("#site_search_first_name").val(l.content[0].firstname);
$("#site_search_last_name").val(l.content[0].lastname)
}else{$("#site_search_first_name").val("");
$("#site_search_last_name").val("")
}}}).data("ui-autocomplete")._renderItem=function(n,o){var l;
if(o.type=="terms"){l="<a>"+o.label+'<br /><span class="autolink" onclick="location.href=\''+o.link+"' ;return false;\">Visit this website</span></a>"
}else{if(o.type=="directory"){var m=$("input#directory_url").val();
var k=m+"?sort=name&fname="+o.firstname+"&lname="+o.lastname;
l='<a><span class="autolink" onclick="location.href=\''+k+"' ;return false;\">"+o.label+"</span>, Phone: "+o.phone+"</a>"
}}return $("<li></li>").data("item.autocomplete",o).append(l).appendTo(n)
}
}if($("#concordia-logo.visible-phone").css("display")=="none"){var a=$("header #navigation-wrapper");
var j=$("header .site-search");
var b=$(".ui-autocomplete");
var f=a.offset().top;
var e=f;
var c=j.offset().top+53;
var i=c;
$(window).scroll(function(){var k=$(".c-quicklinks").height();
if(k>0){e=f+k;
i=c+k
}else{e=f;
i=c
}if($(this).scrollTop()>=e){if(!$(a).hasClass("sticky")&&$("#site-search").height()>0){$("#site-search").collapse("hide");
$("a.concordia-search-icon").removeClass("open");
$(".ui-autocomplete").css("display","none")
}$(a).addClass("sticky");
$(j).addClass("sticky");
$(b).addClass("sticky");
$(b).css("top",i)
}else{$(a).removeClass("sticky");
$(j).removeClass("sticky");
$(b).removeClass("sticky")
}});
$("html").click(function(k){var l=$(k.target);
if(!l.closest("#site-search").length&&!l.hasClass("concordia-search-icon")&&$("#input-search").val().length<3){if($("#site-search").height()>0){$("#site-search").collapse("hide");
$("a.concordia-search-icon").removeClass("open")
}}})
}});
function loadSearchUrls(d,b,c){var a=d.findParentByType("panel").findById("search_url_widget");
var e=d.findParentByType("panel").findById("directory_url_widget");
$CQ.ajax({url:"/etc/designs/concordia/jcr:content/site-search.json",success:function(f){if(f.search_url){a.setValue(f.search_url)
}if(f.directory_url){e.setValue(f.directory_url)
}}})
};